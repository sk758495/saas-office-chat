// Emoji shortcuts - converts text shortcuts to emojis
class EmojiShortcuts {
    constructor() {
        this.shortcuts = {
            // Basic smileys
            ':)': 'ğŸ˜Š',
            ':-)': 'ğŸ˜Š',
            ':(': 'ğŸ˜',
            ':-(': 'ğŸ˜',
            ':D': 'ğŸ˜ƒ',
            ':-D': 'ğŸ˜ƒ',
            ':P': 'ğŸ˜›',
            ':-P': 'ğŸ˜›',
            ':p': 'ğŸ˜›',
            ':-p': 'ğŸ˜›',
            ';)': 'ğŸ˜‰',
            ';-)': 'ğŸ˜‰',
            ':o': 'ğŸ˜®',
            ':-o': 'ğŸ˜®',
            ':O': 'ğŸ˜®',
            ':-O': 'ğŸ˜®',
            ':|': 'ğŸ˜',
            ':-|': 'ğŸ˜',
            ':/': 'ğŸ˜•',
            ':-/': 'ğŸ˜•',
            ':\\': 'ğŸ˜•',
            ':-\\': 'ğŸ˜•',
            ':*': 'ğŸ˜˜',
            ':-*': 'ğŸ˜˜',
            '<3': 'â¤ï¸',
            '</3': 'ğŸ’”',
            
            // Text shortcuts
            ':heart:': 'â¤ï¸',
            ':love:': 'ğŸ˜',
            ':kiss:': 'ğŸ˜˜',
            ':hug:': 'ğŸ¤—',
            ':thumbsup:': 'ğŸ‘',
            ':thumbsdown:': 'ğŸ‘',
            ':ok:': 'ğŸ‘Œ',
            ':clap:': 'ğŸ‘',
            ':pray:': 'ğŸ™',
            ':fire:': 'ğŸ”¥',
            ':100:': 'ğŸ’¯',
            ':star:': 'â­',
            ':sparkles:': 'âœ¨',
            ':rocket:': 'ğŸš€',
            ':party:': 'ğŸ‰',
            ':cake:': 'ğŸ‚',
            ':gift:': 'ğŸ',
            ':balloon:': 'ğŸˆ',
            ':music:': 'ğŸµ',
            ':phone:': 'ğŸ“±',
            ':computer:': 'ğŸ’»',
            ':coffee:': 'â˜•',
            ':pizza:': 'ğŸ•',
            ':burger:': 'ğŸ”',
            ':beer:': 'ğŸº',
            ':wine:': 'ğŸ·',
            ':sun:': 'â˜€ï¸',
            ':moon:': 'ğŸŒ™',
            ':rainbow:': 'ğŸŒˆ',
            ':flower:': 'ğŸŒ¸',
            ':tree:': 'ğŸŒ³',
            ':dog:': 'ğŸ¶',
            ':cat:': 'ğŸ±',
            ':panda:': 'ğŸ¼',
            ':lion:': 'ğŸ¦',
            ':tiger:': 'ğŸ¯',
            ':bear:': 'ğŸ»',
            ':monkey:': 'ğŸµ',
            ':unicorn:': 'ğŸ¦„',
            ':car:': 'ğŸš—',
            ':plane:': 'âœˆï¸',
            ':train:': 'ğŸš‚',
            ':bike:': 'ğŸš²',
            ':home:': 'ğŸ ',
            ':office:': 'ğŸ¢',
            ':school:': 'ğŸ«',
            ':hospital:': 'ğŸ¥',
            ':money:': 'ğŸ’°',
            ':gem:': 'ğŸ’',
            ':crown:': 'ğŸ‘‘',
            ':trophy:': 'ğŸ†',
            ':medal:': 'ğŸ…',
            ':key:': 'ğŸ”‘',
            ':lock:': 'ğŸ”’',
            ':unlock:': 'ğŸ”“',
            ':bell:': 'ğŸ””',
            ':mute:': 'ğŸ”•',
            ':loud:': 'ğŸ“¢',
            ':book:': 'ğŸ“š',
            ':pen:': 'âœï¸',
            ':pencil:': 'âœï¸',
            ':email:': 'ğŸ“§',
            ':letter:': 'ğŸ’Œ',
            ':package:': 'ğŸ“¦',
            ':camera:': 'ğŸ“·',
            ':video:': 'ğŸ“¹',
            ':tv:': 'ğŸ“º',
            ':radio:': 'ğŸ“»',
            ':game:': 'ğŸ®',
            ':dice:': 'ğŸ²',
            ':chess:': 'â™Ÿï¸',
            ':football:': 'âš½',
            ':basketball:': 'ğŸ€',
            ':tennis:': 'ğŸ¾',
            ':baseball:': 'âš¾',
            ':golf:': 'â›³',
            ':swimming:': 'ğŸŠ',
            ':running:': 'ğŸƒ',
            ':walking:': 'ğŸš¶',
            ':dancing:': 'ğŸ’ƒ',
            ':muscle:': 'ğŸ’ª',
            ':brain:': 'ğŸ§ ',
            ':eye:': 'ğŸ‘ï¸',
            ':ear:': 'ğŸ‘‚',
            ':nose:': 'ğŸ‘ƒ',
            ':mouth:': 'ğŸ‘„',
            ':tongue:': 'ğŸ‘…',
            ':tooth:': 'ğŸ¦·',
            ':hand:': 'âœ‹',
            ':finger:': 'ğŸ‘†',
            ':point:': 'ğŸ‘‰',
            ':wave:': 'ğŸ‘‹',
            ':peace:': 'âœŒï¸',
            ':rock:': 'ğŸ¤˜',
            ':metal:': 'ğŸ¤˜',
            ':punch:': 'ğŸ‘Š',
            ':fist:': 'âœŠ',
            ':handshake:': 'ğŸ¤',
            ':nail:': 'ğŸ’…',
            ':lipstick:': 'ğŸ’„',
            ':ring:': 'ğŸ’',
            ':bag:': 'ğŸ‘œ',
            ':shoe:': 'ğŸ‘ ',
            ':hat:': 'ğŸ‘’',
            ':glasses:': 'ğŸ‘“',
            ':sunglasses:': 'ğŸ•¶ï¸',
            ':umbrella:': 'â˜‚ï¸',
            ':snowman:': 'â›„',
            ':snow:': 'â„ï¸',
            ':cloud:': 'â˜ï¸',
            ':rain:': 'ğŸŒ§ï¸',
            ':thunder:': 'â›ˆï¸',
            ':lightning:': 'âš¡',
            ':tornado:': 'ğŸŒªï¸',
            ':wind:': 'ğŸ’¨',
            ':fog:': 'ğŸŒ«ï¸',
            ':ocean:': 'ğŸŒŠ',
            ':mountain:': 'â›°ï¸',
            ':volcano:': 'ğŸŒ‹',
            ':desert:': 'ğŸœï¸',
            ':beach:': 'ğŸ–ï¸',
            ':island:': 'ğŸï¸',
            ':park:': 'ğŸï¸',
            ':camping:': 'ğŸ•ï¸',
            ':tent:': 'â›º',
            ':bridge:': 'ğŸŒ‰',
            ':ferris:': 'ğŸ¡',
            ':roller:': 'ğŸ¢',
            ':carousel:': 'ğŸ ',
            ':circus:': 'ğŸª',
            ':theater:': 'ğŸ­',
            ':art:': 'ğŸ¨',
            ':paint:': 'ğŸ¨',
            ':brush:': 'ğŸ–Œï¸',
            ':crayon:': 'ğŸ–ï¸',
            ':scissors:': 'âœ‚ï¸',
            ':ruler:': 'ğŸ“',
            ':triangle:': 'ğŸ“',
            ':clip:': 'ğŸ“',
            ':pin:': 'ğŸ“Œ',
            ':magnet:': 'ğŸ§²',
            ':bomb:': 'ğŸ’£',
            ':gun:': 'ğŸ”«',
            ':knife:': 'ğŸ”ª',
            ':sword:': 'âš”ï¸',
            ':shield:': 'ğŸ›¡ï¸',
            ':bow:': 'ğŸ¹',
            ':hammer:': 'ğŸ”¨',
            ':wrench:': 'ğŸ”§',
            ':screwdriver:': 'ğŸª›',
            ':nut:': 'ğŸ”©',
            ':gear:': 'âš™ï¸',
            ':chain:': 'â›“ï¸',
            ':anchor:': 'âš“',
            ':wheel:': 'âš™ï¸',
            ':battery:': 'ğŸ”‹',
            ':plug:': 'ğŸ”Œ',
            ':bulb:': 'ğŸ’¡',
            ':flashlight:': 'ğŸ”¦',
            ':candle:': 'ğŸ•¯ï¸',
            ':fire:': 'ğŸ”¥',
            ':fireworks:': 'ğŸ†',
            ':sparkler:': 'ğŸ‡',
            ':boom:': 'ğŸ’¥',
            ':collision:': 'ğŸ’¥',
            ':splash:': 'ğŸ’¦',
            ':droplet:': 'ğŸ’§',
            ':sweat:': 'ğŸ’¦',
            ':dash:': 'ğŸ’¨',
            ':zzz:': 'ğŸ’¤',
            ':speech:': 'ğŸ’¬',
            ':thought:': 'ğŸ’­',
            ':anger:': 'ğŸ’¢',
            ':hole:': 'ğŸ•³ï¸',
            ':pill:': 'ğŸ’Š',
            ':syringe:': 'ğŸ’‰',
            ':thermometer:': 'ğŸŒ¡ï¸',
            ':bandage:': 'ğŸ©¹',
            ':stethoscope:': 'ğŸ©º',
            ':dna:': 'ğŸ§¬',
            ':microbe:': 'ğŸ¦ ',
            ':virus:': 'ğŸ¦ ',
            ':mask:': 'ğŸ˜·',
            ':face_mask:': 'ğŸ˜·',
            
            // Reactions
            ':lol:': 'ğŸ˜‚',
            ':rofl:': 'ğŸ¤£',
            ':lmao:': 'ğŸ˜‚',
            ':omg:': 'ğŸ˜±',
            ':wow:': 'ğŸ˜®',
            ':cool:': 'ğŸ˜',
            ':nerd:': 'ğŸ¤“',
            ':geek:': 'ğŸ¤“',
            ':smart:': 'ğŸ¤“',
            ':think:': 'ğŸ¤”',
            ':hmm:': 'ğŸ¤”',
            ':shrug:': 'ğŸ¤·',
            ':facepalm:': 'ğŸ¤¦',
            ':yawn:': 'ğŸ¥±',
            ':sleepy:': 'ğŸ˜´',
            ':tired:': 'ğŸ˜«',
            ':sick:': 'ğŸ¤’',
            ':dizzy:': 'ğŸ˜µ',
            ':crazy:': 'ğŸ¤ª',
            ':wild:': 'ğŸ¤ª',
            ':party_face:': 'ğŸ¥³',
            ':cowboy:': 'ğŸ¤ ',
            ':pirate:': 'ğŸ´â€â˜ ï¸',
            ':ninja:': 'ğŸ¥·',
            ':superhero:': 'ğŸ¦¸',
            ':villain:': 'ğŸ¦¹',
            ':zombie:': 'ğŸ§Ÿ',
            ':ghost:': 'ğŸ‘»',
            ':alien:': 'ğŸ‘½',
            ':robot:': 'ğŸ¤–',
            ':skull:': 'ğŸ’€',
            ':poop:': 'ğŸ’©',
            ':shit:': 'ğŸ’©',
            
            // Animals extended
            ':fox:': 'ğŸ¦Š',
            ':wolf:': 'ğŸº',
            ':horse:': 'ğŸ´',
            ':pig:': 'ğŸ·',
            ':cow:': 'ğŸ„',
            ':sheep:': 'ğŸ‘',
            ':goat:': 'ğŸ',
            ':deer:': 'ğŸ¦Œ',
            ':elephant:': 'ğŸ˜',
            ':rhino:': 'ğŸ¦',
            ':hippo:': 'ğŸ¦›',
            ':giraffe:': 'ğŸ¦’',
            ':kangaroo:': 'ğŸ¦˜',
            ':koala:': 'ğŸ¨',
            ':sloth:': 'ğŸ¦¥',
            ':otter:': 'ğŸ¦¦',
            ':skunk:': 'ğŸ¦¨',
            ':badger:': 'ğŸ¦¡',
            ':raccoon:': 'ğŸ¦',
            ':hedgehog:': 'ğŸ¦”',
            ':bat:': 'ğŸ¦‡',
            ':bird:': 'ğŸ¦',
            ':eagle:': 'ğŸ¦…',
            ':duck:': 'ğŸ¦†',
            ':swan:': 'ğŸ¦¢',
            ':owl:': 'ğŸ¦‰',
            ':peacock:': 'ğŸ¦š',
            ':parrot:': 'ğŸ¦œ',
            ':flamingo:': 'ğŸ¦©',
            ':penguin:': 'ğŸ§',
            ':chicken:': 'ğŸ”',
            ':rooster:': 'ğŸ“',
            ':turkey:': 'ğŸ¦ƒ',
            ':fish:': 'ğŸŸ',
            ':shark:': 'ğŸ¦ˆ',
            ':whale:': 'ğŸ‹',
            ':dolphin:': 'ğŸ¬',
            ':octopus:': 'ğŸ™',
            ':squid:': 'ğŸ¦‘',
            ':shrimp:': 'ğŸ¦',
            ':lobster:': 'ğŸ¦',
            ':crab:': 'ğŸ¦€',
            ':turtle:': 'ğŸ¢',
            ':snake:': 'ğŸ',
            ':lizard:': 'ğŸ¦',
            ':crocodile:': 'ğŸŠ',
            ':frog:': 'ğŸ¸',
            ':butterfly:': 'ğŸ¦‹',
            ':bee:': 'ğŸ',
            ':ant:': 'ğŸœ',
            ':spider:': 'ğŸ•·ï¸',
            ':scorpion:': 'ğŸ¦‚',
            ':snail:': 'ğŸŒ',
            ':bug:': 'ğŸ›',
            
            // Food extended
            ':apple:': 'ğŸ',
            ':orange:': 'ğŸŠ',
            ':banana:': 'ğŸŒ',
            ':grapes:': 'ğŸ‡',
            ':strawberry:': 'ğŸ“',
            ':watermelon:': 'ğŸ‰',
            ':peach:': 'ğŸ‘',
            ':cherry:': 'ğŸ’',
            ':pineapple:': 'ğŸ',
            ':mango:': 'ğŸ¥­',
            ':avocado:': 'ğŸ¥‘',
            ':tomato:': 'ğŸ…',
            ':carrot:': 'ğŸ¥•',
            ':corn:': 'ğŸŒ½',
            ':pepper:': 'ğŸŒ¶ï¸',
            ':cucumber:': 'ğŸ¥’',
            ':broccoli:': 'ğŸ¥¦',
            ':potato:': 'ğŸ¥”',
            ':onion:': 'ğŸ§…',
            ':garlic:': 'ğŸ§„',
            ':bread:': 'ğŸ',
            ':croissant:': 'ğŸ¥',
            ':bagel:': 'ğŸ¥¯',
            ':pretzel:': 'ğŸ¥¨',
            ':cheese:': 'ğŸ§€',
            ':egg:': 'ğŸ¥š',
            ':bacon:': 'ğŸ¥“',
            ':steak:': 'ğŸ¥©',
            ':chicken_leg:': 'ğŸ—',
            ':hotdog:': 'ğŸŒ­',
            ':taco:': 'ğŸŒ®',
            ':burrito:': 'ğŸŒ¯',
            ':sandwich:': 'ğŸ¥ª',
            ':salad:': 'ğŸ¥—',
            ':soup:': 'ğŸ²',
            ':pasta:': 'ğŸ',
            ':ramen:': 'ğŸœ',
            ':sushi:': 'ğŸ£',
            ':rice:': 'ğŸš',
            ':curry:': 'ğŸ›',
            ':fries:': 'ğŸŸ',
            ':popcorn:': 'ğŸ¿',
            ':nuts:': 'ğŸ¥œ',
            ':chocolate:': 'ğŸ«',
            ':candy:': 'ğŸ¬',
            ':lollipop:': 'ğŸ­',
            ':cookie:': 'ğŸª',
            ':donut:': 'ğŸ©',
            ':ice_cream:': 'ğŸ¦',
            ':pie:': 'ğŸ¥§',
            ':cupcake:': 'ğŸ§',
            ':honey:': 'ğŸ¯',
            ':milk:': 'ğŸ¥›',
            ':tea:': 'ğŸµ',
            ':juice:': 'ğŸ§ƒ',
            ':soda:': 'ğŸ¥¤',
            ':cocktail:': 'ğŸ¹',
            ':champagne:': 'ğŸ¾',
            ':sake:': 'ğŸ¶',
            
            // Numbers
            ':0:': '0ï¸âƒ£',
            ':1:': '1ï¸âƒ£',
            ':2:': '2ï¸âƒ£',
            ':3:': '3ï¸âƒ£',
            ':4:': '4ï¸âƒ£',
            ':5:': '5ï¸âƒ£',
            ':6:': '6ï¸âƒ£',
            ':7:': '7ï¸âƒ£',
            ':8:': '8ï¸âƒ£',
            ':9:': '9ï¸âƒ£',
            ':10:': 'ğŸ”Ÿ',
            
            // Symbols
            ':check:': 'âœ…',
            ':x:': 'âŒ',
            ':cross:': 'âŒ',
            ':question:': 'â“',
            ':exclamation:': 'â—',
            ':warning:': 'âš ï¸',
            ':stop:': 'ğŸ›‘',
            ':no_entry:': 'â›”',
            ':recycle:': 'â™»ï¸',
            ':infinity:': 'â™¾ï¸',
            ':copyright:': 'Â©ï¸',
            ':registered:': 'Â®ï¸',
            ':trademark:': 'â„¢ï¸',
            ':hash:': '#ï¸âƒ£',
            ':asterisk:': '*ï¸âƒ£',
            ':arrow_up:': 'â¬†ï¸',
            ':arrow_down:': 'â¬‡ï¸',
            ':arrow_left:': 'â¬…ï¸',
            ':arrow_right:': 'â¡ï¸',
            ':arrow_up_right:': 'â†—ï¸',
            ':arrow_down_right:': 'â†˜ï¸',
            ':arrow_down_left:': 'â†™ï¸',
            ':arrow_up_left:': 'â†–ï¸',
            ':up_down:': 'â†•ï¸',
            ':left_right:': 'â†”ï¸',
            ':repeat:': 'ğŸ”',
            ':shuffle:': 'ğŸ”€',
            ':fast_forward:': 'â©',
            ':rewind:': 'âª',
            ':play:': 'â–¶ï¸',
            ':pause:': 'â¸ï¸',
            ':stop_button:': 'â¹ï¸',
            ':record:': 'âºï¸',
            ':eject:': 'âï¸',
            ':cinema:': 'ğŸ¦',
            ':low_brightness:': 'ğŸ”…',
            ':high_brightness:': 'ğŸ”†',
            ':signal_strength:': 'ğŸ“¶',
            ':wifi:': 'ğŸ“¶',
            ':vibration:': 'ğŸ“³',
            ':mobile_off:': 'ğŸ“´',
            
            // Time
            ':clock:': 'ğŸ•',
            ':watch:': 'âŒš',
            ':timer:': 'â²ï¸',
            ':stopwatch:': 'â±ï¸',
            ':alarm:': 'â°',
            ':hourglass:': 'â³',
            ':calendar:': 'ğŸ“…',
            ':date:': 'ğŸ“…',
            ':spiral_calendar:': 'ğŸ—“ï¸',
            
            // Weather
            ':sunny:': 'â˜€ï¸',
            ':partly_sunny:': 'â›…',
            ':cloudy:': 'â˜ï¸',
            ':rainy:': 'ğŸŒ§ï¸',
            ':stormy:': 'â›ˆï¸',
            ':snowy:': 'ğŸŒ¨ï¸',
            ':foggy:': 'ğŸŒ«ï¸',
            ':windy:': 'ğŸ’¨',
            ':cyclone:': 'ğŸŒ€',
            ':rainbow:': 'ğŸŒˆ',
            ':umbrella_rain:': 'â˜”',
            ':snowflake:': 'â„ï¸',
            ':comet:': 'â˜„ï¸',
            
            // Places
            ':house:': 'ğŸ ',
            ':house_garden:': 'ğŸ¡',
            ':building:': 'ğŸ¢',
            ':post_office:': 'ğŸ£',
            ':hospital:': 'ğŸ¥',
            ':bank:': 'ğŸ¦',
            ':hotel:': 'ğŸ¨',
            ':convenience_store:': 'ğŸª',
            ':school:': 'ğŸ«',
            ':department_store:': 'ğŸ¬',
            ':factory:': 'ğŸ­',
            ':castle:': 'ğŸ°',
            ':wedding:': 'ğŸ’’',
            ':tokyo_tower:': 'ğŸ—¼',
            ':statue_liberty:': 'ğŸ—½',
            ':church:': 'â›ª',
            ':mosque:': 'ğŸ•Œ',
            ':synagogue:': 'ğŸ•',
            ':temple:': 'ğŸ›•',
            ':kaaba:': 'ğŸ•‹'
        };
        
        this.init();
    }
    
    init() {
        this.bindEvents();
    }
    
    bindEvents() {
        // Listen for input events on message text field
        document.addEventListener('input', (e) => {
            if (e.target.id === 'messageText') {
                this.processShortcuts(e.target);
            }
        });
        
        // Also listen for space and enter key to trigger conversion
        document.addEventListener('keydown', (e) => {
            if (e.target.id === 'messageText' && (e.key === ' ' || e.key === 'Enter')) {
                setTimeout(() => this.processShortcuts(e.target), 10);
            }
        });
    }
    
    processShortcuts(input) {
        const cursorPos = input.selectionStart;
        const text = input.value;
        
        // Find shortcuts in the text
        for (const [shortcut, emoji] of Object.entries(this.shortcuts)) {
            const regex = new RegExp('\\B' + this.escapeRegex(shortcut) + '\\B', 'g');
            let match;
            
            while ((match = regex.exec(text)) !== null) {
                const start = match.index;
                const end = start + shortcut.length;
                
                // Only replace if cursor is after the shortcut or at the end
                if (cursorPos >= end) {
                    const before = text.substring(0, start);
                    const after = text.substring(end);
                    
                    input.value = before + emoji + after;
                    
                    // Adjust cursor position
                    const newPos = start + emoji.length + (cursorPos - end);
                    input.setSelectionRange(newPos, newPos);
                    
                    // Trigger input event
                    input.dispatchEvent(new Event('input', { bubbles: true }));
                    
                    return; // Only replace one at a time
                }
            }
        }
    }
    
    escapeRegex(string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    }
}

// Initialize emoji shortcuts when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    window.emojiShortcuts = new EmojiShortcuts();
});"