// Emoji shortcuts - converts text shortcuts to emojis
class EmojiShortcuts {
    constructor() {
        this.shortcuts = {
            // Basic smileys
            ':)': '😊',
            ':-)': '😊',
            ':(': '😞',
            ':-(': '😞',
            ':D': '😃',
            ':-D': '😃',
            ':P': '😛',
            ':-P': '😛',
            ':p': '😛',
            ':-p': '😛',
            ';)': '😉',
            ';-)': '😉',
            ':o': '😮',
            ':-o': '😮',
            ':O': '😮',
            ':-O': '😮',
            ':|': '😐',
            ':-|': '😐',
            ':/': '😕',
            ':-/': '😕',
            ':\\': '😕',
            ':-\\': '😕',
            ':*': '😘',
            ':-*': '😘',
            '<3': '❤️',
            '</3': '💔',
            
            // Text shortcuts
            ':heart:': '❤️',
            ':love:': '😍',
            ':kiss:': '😘',
            ':hug:': '🤗',
            ':thumbsup:': '👍',
            ':thumbsdown:': '👎',
            ':ok:': '👌',
            ':clap:': '👏',
            ':pray:': '🙏',
            ':fire:': '🔥',
            ':100:': '💯',
            ':star:': '⭐',
            ':sparkles:': '✨',
            ':rocket:': '🚀',
            ':party:': '🎉',
            ':cake:': '🎂',
            ':gift:': '🎁',
            ':balloon:': '🎈',
            ':music:': '🎵',
            ':phone:': '📱',
            ':computer:': '💻',
            ':coffee:': '☕',
            ':pizza:': '🍕',
            ':burger:': '🍔',
            ':beer:': '🍺',
            ':wine:': '🍷',
            ':sun:': '☀️',
            ':moon:': '🌙',
            ':rainbow:': '🌈',
            ':flower:': '🌸',
            ':tree:': '🌳',
            ':dog:': '🐶',
            ':cat:': '🐱',
            ':panda:': '🐼',
            ':lion:': '🦁',
            ':tiger:': '🐯',
            ':bear:': '🐻',
            ':monkey:': '🐵',
            ':unicorn:': '🦄',
            ':car:': '🚗',
            ':plane:': '✈️',
            ':train:': '🚂',
            ':bike:': '🚲',
            ':home:': '🏠',
            ':office:': '🏢',
            ':school:': '🏫',
            ':hospital:': '🏥',
            ':money:': '💰',
            ':gem:': '💎',
            ':crown:': '👑',
            ':trophy:': '🏆',
            ':medal:': '🏅',
            ':key:': '🔑',
            ':lock:': '🔒',
            ':unlock:': '🔓',
            ':bell:': '🔔',
            ':mute:': '🔕',
            ':loud:': '📢',
            ':book:': '📚',
            ':pen:': '✏️',
            ':pencil:': '✏️',
            ':email:': '📧',
            ':letter:': '💌',
            ':package:': '📦',
            ':camera:': '📷',
            ':video:': '📹',
            ':tv:': '📺',
            ':radio:': '📻',
            ':game:': '🎮',
            ':dice:': '🎲',
            ':chess:': '♟️',
            ':football:': '⚽',
            ':basketball:': '🏀',
            ':tennis:': '🎾',
            ':baseball:': '⚾',
            ':golf:': '⛳',
            ':swimming:': '🏊',
            ':running:': '🏃',
            ':walking:': '🚶',
            ':dancing:': '💃',
            ':muscle:': '💪',
            ':brain:': '🧠',
            ':eye:': '👁️',
            ':ear:': '👂',
            ':nose:': '👃',
            ':mouth:': '👄',
            ':tongue:': '👅',
            ':tooth:': '🦷',
            ':hand:': '✋',
            ':finger:': '👆',
            ':point:': '👉',
            ':wave:': '👋',
            ':peace:': '✌️',
            ':rock:': '🤘',
            ':metal:': '🤘',
            ':punch:': '👊',
            ':fist:': '✊',
            ':handshake:': '🤝',
            ':nail:': '💅',
            ':lipstick:': '💄',
            ':ring:': '💍',
            ':bag:': '👜',
            ':shoe:': '👠',
            ':hat:': '👒',
            ':glasses:': '👓',
            ':sunglasses:': '🕶️',
            ':umbrella:': '☂️',
            ':snowman:': '⛄',
            ':snow:': '❄️',
            ':cloud:': '☁️',
            ':rain:': '🌧️',
            ':thunder:': '⛈️',
            ':lightning:': '⚡',
            ':tornado:': '🌪️',
            ':wind:': '💨',
            ':fog:': '🌫️',
            ':ocean:': '🌊',
            ':mountain:': '⛰️',
            ':volcano:': '🌋',
            ':desert:': '🏜️',
            ':beach:': '🏖️',
            ':island:': '🏝️',
            ':park:': '🏞️',
            ':camping:': '🏕️',
            ':tent:': '⛺',
            ':bridge:': '🌉',
            ':ferris:': '🎡',
            ':roller:': '🎢',
            ':carousel:': '🎠',
            ':circus:': '🎪',
            ':theater:': '🎭',
            ':art:': '🎨',
            ':paint:': '🎨',
            ':brush:': '🖌️',
            ':crayon:': '🖍️',
            ':scissors:': '✂️',
            ':ruler:': '📏',
            ':triangle:': '📐',
            ':clip:': '📎',
            ':pin:': '📌',
            ':magnet:': '🧲',
            ':bomb:': '💣',
            ':gun:': '🔫',
            ':knife:': '🔪',
            ':sword:': '⚔️',
            ':shield:': '🛡️',
            ':bow:': '🏹',
            ':hammer:': '🔨',
            ':wrench:': '🔧',
            ':screwdriver:': '🪛',
            ':nut:': '🔩',
            ':gear:': '⚙️',
            ':chain:': '⛓️',
            ':anchor:': '⚓',
            ':wheel:': '⚙️',
            ':battery:': '🔋',
            ':plug:': '🔌',
            ':bulb:': '💡',
            ':flashlight:': '🔦',
            ':candle:': '🕯️',
            ':fire:': '🔥',
            ':fireworks:': '🎆',
            ':sparkler:': '🎇',
            ':boom:': '💥',
            ':collision:': '💥',
            ':splash:': '💦',
            ':droplet:': '💧',
            ':sweat:': '💦',
            ':dash:': '💨',
            ':zzz:': '💤',
            ':speech:': '💬',
            ':thought:': '💭',
            ':anger:': '💢',
            ':hole:': '🕳️',
            ':pill:': '💊',
            ':syringe:': '💉',
            ':thermometer:': '🌡️',
            ':bandage:': '🩹',
            ':stethoscope:': '🩺',
            ':dna:': '🧬',
            ':microbe:': '🦠',
            ':virus:': '🦠',
            ':mask:': '😷',
            ':face_mask:': '😷',
            
            // Reactions
            ':lol:': '😂',
            ':rofl:': '🤣',
            ':lmao:': '😂',
            ':omg:': '😱',
            ':wow:': '😮',
            ':cool:': '😎',
            ':nerd:': '🤓',
            ':geek:': '🤓',
            ':smart:': '🤓',
            ':think:': '🤔',
            ':hmm:': '🤔',
            ':shrug:': '🤷',
            ':facepalm:': '🤦',
            ':yawn:': '🥱',
            ':sleepy:': '😴',
            ':tired:': '😫',
            ':sick:': '🤒',
            ':dizzy:': '😵',
            ':crazy:': '🤪',
            ':wild:': '🤪',
            ':party_face:': '🥳',
            ':cowboy:': '🤠',
            ':pirate:': '🏴‍☠️',
            ':ninja:': '🥷',
            ':superhero:': '🦸',
            ':villain:': '🦹',
            ':zombie:': '🧟',
            ':ghost:': '👻',
            ':alien:': '👽',
            ':robot:': '🤖',
            ':skull:': '💀',
            ':poop:': '💩',
            ':shit:': '💩',
            
            // Animals extended
            ':fox:': '🦊',
            ':wolf:': '🐺',
            ':horse:': '🐴',
            ':pig:': '🐷',
            ':cow:': '🐄',
            ':sheep:': '🐑',
            ':goat:': '🐐',
            ':deer:': '🦌',
            ':elephant:': '🐘',
            ':rhino:': '🦏',
            ':hippo:': '🦛',
            ':giraffe:': '🦒',
            ':kangaroo:': '🦘',
            ':koala:': '🐨',
            ':sloth:': '🦥',
            ':otter:': '🦦',
            ':skunk:': '🦨',
            ':badger:': '🦡',
            ':raccoon:': '🦝',
            ':hedgehog:': '🦔',
            ':bat:': '🦇',
            ':bird:': '🐦',
            ':eagle:': '🦅',
            ':duck:': '🦆',
            ':swan:': '🦢',
            ':owl:': '🦉',
            ':peacock:': '🦚',
            ':parrot:': '🦜',
            ':flamingo:': '🦩',
            ':penguin:': '🐧',
            ':chicken:': '🐔',
            ':rooster:': '🐓',
            ':turkey:': '🦃',
            ':fish:': '🐟',
            ':shark:': '🦈',
            ':whale:': '🐋',
            ':dolphin:': '🐬',
            ':octopus:': '🐙',
            ':squid:': '🦑',
            ':shrimp:': '🦐',
            ':lobster:': '🦞',
            ':crab:': '🦀',
            ':turtle:': '🐢',
            ':snake:': '🐍',
            ':lizard:': '🦎',
            ':crocodile:': '🐊',
            ':frog:': '🐸',
            ':butterfly:': '🦋',
            ':bee:': '🐝',
            ':ant:': '🐜',
            ':spider:': '🕷️',
            ':scorpion:': '🦂',
            ':snail:': '🐌',
            ':bug:': '🐛',
            
            // Food extended
            ':apple:': '🍎',
            ':orange:': '🍊',
            ':banana:': '🍌',
            ':grapes:': '🍇',
            ':strawberry:': '🍓',
            ':watermelon:': '🍉',
            ':peach:': '🍑',
            ':cherry:': '🍒',
            ':pineapple:': '🍍',
            ':mango:': '🥭',
            ':avocado:': '🥑',
            ':tomato:': '🍅',
            ':carrot:': '🥕',
            ':corn:': '🌽',
            ':pepper:': '🌶️',
            ':cucumber:': '🥒',
            ':broccoli:': '🥦',
            ':potato:': '🥔',
            ':onion:': '🧅',
            ':garlic:': '🧄',
            ':bread:': '🍞',
            ':croissant:': '🥐',
            ':bagel:': '🥯',
            ':pretzel:': '🥨',
            ':cheese:': '🧀',
            ':egg:': '🥚',
            ':bacon:': '🥓',
            ':steak:': '🥩',
            ':chicken_leg:': '🍗',
            ':hotdog:': '🌭',
            ':taco:': '🌮',
            ':burrito:': '🌯',
            ':sandwich:': '🥪',
            ':salad:': '🥗',
            ':soup:': '🍲',
            ':pasta:': '🍝',
            ':ramen:': '🍜',
            ':sushi:': '🍣',
            ':rice:': '🍚',
            ':curry:': '🍛',
            ':fries:': '🍟',
            ':popcorn:': '🍿',
            ':nuts:': '🥜',
            ':chocolate:': '🍫',
            ':candy:': '🍬',
            ':lollipop:': '🍭',
            ':cookie:': '🍪',
            ':donut:': '🍩',
            ':ice_cream:': '🍦',
            ':pie:': '🥧',
            ':cupcake:': '🧁',
            ':honey:': '🍯',
            ':milk:': '🥛',
            ':tea:': '🍵',
            ':juice:': '🧃',
            ':soda:': '🥤',
            ':cocktail:': '🍹',
            ':champagne:': '🍾',
            ':sake:': '🍶',
            
            // Numbers
            ':0:': '0️⃣',
            ':1:': '1️⃣',
            ':2:': '2️⃣',
            ':3:': '3️⃣',
            ':4:': '4️⃣',
            ':5:': '5️⃣',
            ':6:': '6️⃣',
            ':7:': '7️⃣',
            ':8:': '8️⃣',
            ':9:': '9️⃣',
            ':10:': '🔟',
            
            // Symbols
            ':check:': '✅',
            ':x:': '❌',
            ':cross:': '❌',
            ':question:': '❓',
            ':exclamation:': '❗',
            ':warning:': '⚠️',
            ':stop:': '🛑',
            ':no_entry:': '⛔',
            ':recycle:': '♻️',
            ':infinity:': '♾️',
            ':copyright:': '©️',
            ':registered:': '®️',
            ':trademark:': '™️',
            ':hash:': '#️⃣',
            ':asterisk:': '*️⃣',
            ':arrow_up:': '⬆️',
            ':arrow_down:': '⬇️',
            ':arrow_left:': '⬅️',
            ':arrow_right:': '➡️',
            ':arrow_up_right:': '↗️',
            ':arrow_down_right:': '↘️',
            ':arrow_down_left:': '↙️',
            ':arrow_up_left:': '↖️',
            ':up_down:': '↕️',
            ':left_right:': '↔️',
            ':repeat:': '🔁',
            ':shuffle:': '🔀',
            ':fast_forward:': '⏩',
            ':rewind:': '⏪',
            ':play:': '▶️',
            ':pause:': '⏸️',
            ':stop_button:': '⏹️',
            ':record:': '⏺️',
            ':eject:': '⏏️',
            ':cinema:': '🎦',
            ':low_brightness:': '🔅',
            ':high_brightness:': '🔆',
            ':signal_strength:': '📶',
            ':wifi:': '📶',
            ':vibration:': '📳',
            ':mobile_off:': '📴',
            
            // Time
            ':clock:': '🕐',
            ':watch:': '⌚',
            ':timer:': '⏲️',
            ':stopwatch:': '⏱️',
            ':alarm:': '⏰',
            ':hourglass:': '⏳',
            ':calendar:': '📅',
            ':date:': '📅',
            ':spiral_calendar:': '🗓️',
            
            // Weather
            ':sunny:': '☀️',
            ':partly_sunny:': '⛅',
            ':cloudy:': '☁️',
            ':rainy:': '🌧️',
            ':stormy:': '⛈️',
            ':snowy:': '🌨️',
            ':foggy:': '🌫️',
            ':windy:': '💨',
            ':cyclone:': '🌀',
            ':rainbow:': '🌈',
            ':umbrella_rain:': '☔',
            ':snowflake:': '❄️',
            ':comet:': '☄️',
            
            // Places
            ':house:': '🏠',
            ':house_garden:': '🏡',
            ':building:': '🏢',
            ':post_office:': '🏣',
            ':hospital:': '🏥',
            ':bank:': '🏦',
            ':hotel:': '🏨',
            ':convenience_store:': '🏪',
            ':school:': '🏫',
            ':department_store:': '🏬',
            ':factory:': '🏭',
            ':castle:': '🏰',
            ':wedding:': '💒',
            ':tokyo_tower:': '🗼',
            ':statue_liberty:': '🗽',
            ':church:': '⛪',
            ':mosque:': '🕌',
            ':synagogue:': '🕍',
            ':temple:': '🛕',
            ':kaaba:': '🕋'
        };
        
        this.init();
    }
    
    init() {
        this.bindEvents();
    }
    
    bindEvents() {
        // Listen for input events on message text field
        document.addEventListener('input', (e) => {
            if (e.target.id === 'messageText') {
                this.processShortcuts(e.target);
            }
        });
        
        // Also listen for space and enter key to trigger conversion
        document.addEventListener('keydown', (e) => {
            if (e.target.id === 'messageText' && (e.key === ' ' || e.key === 'Enter')) {
                setTimeout(() => this.processShortcuts(e.target), 10);
            }
        });
    }
    
    processShortcuts(input) {
        const cursorPos = input.selectionStart;
        const text = input.value;
        
        // Find shortcuts in the text
        for (const [shortcut, emoji] of Object.entries(this.shortcuts)) {
            const regex = new RegExp('\\B' + this.escapeRegex(shortcut) + '\\B', 'g');
            let match;
            
            while ((match = regex.exec(text)) !== null) {
                const start = match.index;
                const end = start + shortcut.length;
                
                // Only replace if cursor is after the shortcut or at the end
                if (cursorPos >= end) {
                    const before = text.substring(0, start);
                    const after = text.substring(end);
                    
                    input.value = before + emoji + after;
                    
                    // Adjust cursor position
                    const newPos = start + emoji.length + (cursorPos - end);
                    input.setSelectionRange(newPos, newPos);
                    
                    // Trigger input event
                    input.dispatchEvent(new Event('input', { bubbles: true }));
                    
                    return; // Only replace one at a time
                }
            }
        }
    }
    
    escapeRegex(string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    }
}

// Initialize emoji shortcuts when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    window.emojiShortcuts = new EmojiShortcuts();
});"